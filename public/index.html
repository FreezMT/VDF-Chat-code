<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VDF Chat</title>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- SPLASH -->
    <main id="splash" class="splash">
        <img src="logo.png" alt="Vinyl Dance Family" class="logo">
    </main>

    <!-- WELCOME -->
    <main id="welcome" class="welcome-screen">
        <section class="welcome-content">
            <h1 class="welcome-title">
                Добро пожаловаться в<br>
                <span>VDF Chat</span>
            </h1>
            <p class="welcome-subtitle">
                Здесь вы сможете общаться<br>
                со своей командой
            </p>
        </section>

        <section class="welcome-buttons">
            <button class="btn" id="registerBtn">Регистрация</button>
            <button class="btn" id="loginBtn">Вход</button>
        </section>
    </main>

    <!-- REGISTER: ROLE -->
    <main id="registerScreen" class="register-screen">
        <button type="button" class="back-btn" id="backToWelcome">←</button>

        <header class="register-header">
            <h1 class="register-title">Регистрация</h1>
            <p class="register-subtitle">
                Придумайте логин и пароль<br>
                и выберите кем вы являетесь
            </p>
        </header>

        <form class="register-form" autocomplete="off">
            <p class="field-note">Только на латинице</p>
            <div class="field">
                <input id="loginInput" type="text" maxlength="20" placeholder="Логин">
            </div>

            <p class="field-note">Только на латинице</p>
            <div class="field field-password">
                <input id="passwordInput" type="password" maxlength="20" placeholder="Парроль">
                <button type="button" class="toggle-password" aria-label="Показать пароль"></button>
            </div>

            <div class="field field-select" id="roleSelect">
                <div class="select-display">
                    <span id="roleText">Выберите</span>
                    <span class="select-arrow"></span>
                </div>
                <div class="select-options">
                    <div class="select-option" data-value="parent">Родитель</div>
                    <div class="select-option" data-value="dancer">Танцор</div>
                </div>
                <input type="hidden" id="roleValue">
            </div>

            <button type="button" class="btn btn-primary">Продолжить</button>
        </form>
    </main>

    <!-- REGISTER: PARENT -->
    <main id="parentInfoScreen" class="parent-screen">
        <button type="button" class="back-btn" id="backToRegister">←</button>

        <header class="parent-header">
            <h1 class="register-title">Регистрация</h1>
            <p class="register-subtitle">
                Введите имя, фамилию и<br>
                выберите команду в которой<br>
                ваш ребёнок
            </p>
        </header>

        <form class="parent-form" autocomplete="off">
            <div class="field">
                <input id="parentFirstName" type="text" maxlength="30" placeholder="Имя">
            </div>

            <div class="field">
                <input id="parentLastName" type="text" maxlength="30" placeholder="Фамилия">
            </div>

            <div class="field field-select" id="teamSelect">
                <div class="select-display">
                    <span id="teamText">Выберите</span>
                    <span class="select-arrow"></span>
                </div>
                <div class="select-options">
                    <div class="select-option" data-value="vinyl-dance-family">Vinyl Dance Family</div>
                    <div class="select-option" data-value="vinyl-junior-family">Vinyl Junior Family</div>
                    <div class="select-option" data-value="vinyl-kids-family">Vinyl Kids Family</div>
                    <div class="select-option" data-value="vdf-crew">VDF Crew</div>
                    <div class="select-option" data-value="vdf-kidz-crew">VDF Kidz Crew</div>
                    <div class="select-option" data-value="Аделя 10+">Аделя 10+</div>
                    <div class="select-option" data-value="Ди 10+">Ди 10+</div>
                    <div class="select-option" data-value="Аделя 18+">Аделя 18+</div>
                    <div class="select-option" data-value="Алексей 10+">Алексей 10+</div>
                    <div class="select-option" data-value="Вика 9+">Вика 9+</div>
                    <div class="select-option" data-value="Алексей 12+ Гжель">Алексей 12+ Гжель</div>
                    <div class="select-option" data-value="Ангелина 7+">Ангелина 7+</div>
                    <div class="select-option" data-value="Аврора 7+">Аврора 7+</div>
                    <div class="select-option" data-value="Ангелина 12+">Ангелина 12+</div>
                    <div class="select-option" data-value="Ангелина 14+">Ангелина 14+</div>
                    <div class="select-option" data-value="6 Состав">6 Состав</div>
                    <div class="select-option" data-value="7 Состав">7 Состав</div>
                    <div class="select-option" data-value="Crazy Parents">Crazy Parents</div>
                    <div class="select-option" data-value="Алексей 7+ Реутов">Алексей 7+ Реутов</div>
                    <div class="select-option" data-value="Вика 7+ Реутов">Вика 7+ Реутов</div>
                </div>
                <input type="hidden" id="teamValue">
            </div>

            <button type="button" class="btn btn-primary" id="parentContinueBtn">Продолжить</button>
        </form>
    </main>

    <!-- REGISTER: DANCER -->
    <main id="dancerInfoScreen" class="dancer-screen">
        <button type="button" class="back-btn" id="backToRegisterFromDancer">←</button>

        <header class="dancer-header">
            <h1 class="register-title">Регистрация</h1>
            <p class="register-subtitle">
                Введите имя, фамилию,<br>
                выберите дату рождения и<br>
                команду в которой занимаетесь
            </p>
        </header>

        <form class="dancer-form" autocomplete="off">
            <div class="field">
                <input id="dancerFirstName" type="text" maxlength="30" placeholder="Имя">
            </div>

            <div class="field">
                <input id="dancerLastName" type="text" maxlength="30" placeholder="Фамилия">
            </div>

            <div class="field field-select" id="dancerTeamSelect">
                <div class="select-display">
                    <span id="dancerTeamText">Выберите</span>
                    <span class="select-arrow"></span>
                </div>
                <div class="select-options">
                    <div class="select-option" data-value="vinyl-dance-family">Vinyl Dance Family</div>
                    <div class="select-option" data-value="vinyl-junior-family">Vinyl Junior Family</div>
                    <div class="select-option" data-value="vinyl-kids-family">Vinyl Kids Family</div>
                    <div class="select-option" data-value="vdf-crew">VDF Crew</div>
                    <div class="select-option" data-value="vdf-kidz-crew">VDF Kidz Crew</div>
                    <div class="select-option" data-value="Аделя 10+">Аделя 10+</div>
                    <div class="select-option" data-value="Ди 10+">Ди 10+</div>
                    <div class="select-option" data-value="Аделя 18+">Аделя 18+</div>
                    <div class="select-option" data-value="Алексей 10+">Алексей 10+</div>
                    <div class="select-option" data-value="Вика 9+">Вика 9+</div>
                    <div class="select-option" data-value="Алексей 12+ Гжель">Алексей 12+ Гжель</div>
                    <div class="select-option" data-value="Ангелина 7+">Ангелина 7+</div>
                    <div class="select-option" data-value="Аврора 7+">Аврора 7+</div>
                    <div class="select-option" data-value="Ангелина 12+">Ангелина 12+</div>
                    <div class="select-option" data-value="Ангелина 14+">Ангелина 14+</div>
                    <div class="select-option" data-value="6 Состав">6 Состав</div>
                    <div class="select-option" data-value="7 Состав">7 Состав</div>
                    <div class="select-option" data-value="Crazy Parents">Crazy Parents</div>
                    <div class="select-option" data-value="Алексей 7+ Реутов">Алексей 7+ Реутов</div>
                    <div class="select-option" data-value="Вика 7+ Реутов">Вика 7+ Реутов</div>
                </div>
                <input type="hidden" id="dancerTeamValue">
            </div>

            <div class="field field-date" id="dancerDobField">
                <span id="dancerDobText">Выберите</span>
                <button type="button" class="date-btn" id="dancerDobBtn"></button>
                <input type="date" id="dancerDobInput">
            </div>

            <button type="button" class="btn btn-primary" id="dancerContinueBtn">Продолжить</button>
        </form>
    </main>

    <!-- LOGIN -->
    <main id="loginScreen" class="login-screen">
        <button type="button" class="back-btn" id="backToWelcomeFromLogin">←</button>

        <header class="login-header">
            <h1 class="register-title">Вход</h1>
            <p class="register-subtitle">
                Введите логин и пароль для<br>
                входа
            </p>
        </header>

        <form class="login-form" autocomplete="off">
            <div class="field">
                <input id="loginScreenLogin" type="text" maxlength="20" placeholder="Логин">
            </div>

            <div class="field">
                <input id="loginScreenPassword" type="password" maxlength="20" placeholder="Пароль">
            </div>

            <button type="button" class="btn btn-primary" id="loginContinueBtn">Продолжить</button>
        </form>
    </main>

    <!-- FEED: ЛЕНТА АКТИВНОСТИ -->
    <main id="feedScreen" class="feed-screen">
        <section class="feed-list" id="feedList"></section>

        <button type="button" class="feed-create-btn" id="createPostBtn">
            Создать пост
        </button>
    </main>

    <!-- MODAL: СОЗДАНИЕ ПОСТА -->
    <div id="postModal" class="post-modal">
        <div class="post-modal-backdrop"></div>
        <div class="post-modal-card">
            <div class="post-modal-title">Новый пост</div>

            <div class="post-modal-field">
                <div class="post-modal-label">Фотография (по желанию)</div>
                <button type="button" class="post-modal-upload-btn" id="postImageBtn">
                    Загрузить фото
                </button>
                <input type="file" id="postImageInput" accept="image/*" style="display:none">

                <div class="post-image-preview" id="postImagePreview" style="display:none">
                    <img id="postImagePreviewImg" alt="Превью">
                </div>
            </div>

            <div class="post-modal-field">
                <div class="post-modal-label">Текст поста</div>
                <textarea id="postTextInput" maxlength="2000" placeholder="Напишите что-нибудь..."></textarea>
            </div>

            <div class="post-modal-actions">
                <button type="button" class="post-modal-btn post-modal-cancel" id="postCancelBtn">
                    Отмена
                </button>
                <button type="button" class="post-modal-btn post-modal-submit" id="postSubmitBtn">
                    Опубликовать
                </button>
            </div>
        </div>
    </div>

    <!-- MAIN (LIST OF CHATS) -->
    <main id="mainScreen" class="main-screen">
        <div class="chat-search-wrapper">
            <input type="text" id="chatSearchInput" placeholder="Поиск по чатам">
        </div>
        <section class="chat-list" id="chatList"></section>
    </main>

    <!-- CHAT -->
    <main id="chatScreen" class="chat-screen">
        <header class="chat-header">
            <button type="button" class="chat-back" id="backToMainFromChat">←</button>

            <div class="chat-header-center">
                <div class="chat-header-title" id="chatHeaderTitle">Чат</div>
                <div class="chat-header-status" id="chatHeaderStatus"></div>
            </div>

            <div class="chat-header-avatar">
                <img id="chatHeaderAvatar" src="/img/default-avatar.png" alt="">
            </div>
        </header>

        <div id="pinnedTopBar" class="pinned-top-bar"></div>

        <section class="chat-content"></section>
        <div id="chatLoadingOverlay" class="chat-loading-overlay">
            <div class="chat-loading-spinner"></div>
        </div>

        <div id="replyBar" class="reply-bar">
            <div class="reply-bar-content">
                <div id="replySender" class="reply-bar-title"></div>
                <div id="replyText" class="reply-bar-text"></div>
            </div>
            <button id="replyCancelBtn" type="button" class="reply-bar-cancel">✕</button>
        </div>

        <div id="attachPreviewBar" class="attach-preview-bar"></div>

        <form class="chat-input-bar" id="chatInputForm">
            <button type="button" class="chat-attach-btn" id="chatAttachBtn"></button>
            <input type="file" id="chatAttachInput" style="display:none">

            <textarea id="chatInput" rows="1" placeholder="Сообщение"></textarea>

            <!-- UI для записи голосового -->
            <div class="voice-record-ui" id="voiceRecordUi">
                <div class="voice-red-dot"></div>
                <div class="voice-wave-live" id="voiceWaveLive"></div>
                <div class="voice-record-hint">Свайп вправо — отмена</div>
                <div class="voice-timer" id="voiceTimer">0:00</div>
            </div>

            <div class="chat-send-mic-wrapper">
                <button type="button" class="chat-mic-btn" id="chatMicBtn"></button>
                <button type="submit" class="chat-send-btn" id="chatSendBtn"></button>
            </div>
        </form>

        <!-- MODAL: ПЕРЕСЛАТЬ СООБЩЕНИЕ -->
        <div id="forwardModal" class="forward-modal">
            <div class="forward-backdrop"></div>
            <div class="forward-card">
                <div class="forward-title">Переслать сообщение</div>
                <div class="forward-list" id="forwardList"></div>
                <div class="forward-actions">
                    <button type="button" id="forwardCancelBtn" class="forward-btn forward-btn-cancel">
                        Отмена
                    </button>
                    <button type="button" id="forwardSubmitBtn" class="forward-btn forward-btn-submit" disabled>
                        Отправить
                    </button>
                </div>
            </div>
        </div>

        <!-- MODAL WITH USER INFO -->
        <div id="chatUserModal" class="chat-user-modal">
            <div class="chat-user-modal-backdrop"></div>
            <div class="chat-user-modal-card">
                <button type="button" id="chatUserBackBtn" class="chat-user-back-btn">←</button>

                <div class="chat-user-avatar-wrapper">
                    <img id="chatUserAvatar" src="/img/default-avatar.png" alt="Аватар" class="chat-user-avatar">
                </div>
                <div class="chat-user-name" id="chatUserName"></div>
                <div class="chat-user-pill" id="chatUserId"></div>
                <div class="chat-user-pill" id="chatUserTeam"></div>
                <div class="chat-user-pill" id="chatUserDob"></div>

                <!-- Вложения пользователя в текущем чате -->
                <div class="chat-attachments" id="chatUserAttachments">
                    <div class="chat-attachments-tabs">
                        <button type="button" class="chat-attachments-tab chat-attachments-tab-active" id="chatUserMediaTab">
                            Медиа
                        </button>
                        <button type="button" class="chat-attachments-tab" id="chatUserFilesTab">
                            Файлы
                        </button>
                        <button type="button" class="chat-attachments-tab" id="chatUserAudioTab">
                            Аудио
                        </button>
                    </div>

                    <div class="chat-attachments-content">
                        <div class="chat-attachments-media-grid" id="chatUserMediaGrid"></div>
                        <div class="chat-attachments-files-list" id="chatUserFilesList"></div>
                        <div class="chat-attachments-audio-list" id="chatUserAudioList"></div>
                    </div>
                </div>

                <button type="button" class="chat-user-write-btn" id="chatUserWriteBtn">Написать</button>
                <button type="button" class="chat-user-remove-btn" id="chatUserRemoveBtn">Удалить из группы</button>
            </div>
        </div>

        <!-- MODAL WITH GROUP INFO -->
        <div id="groupModal" class="chat-user-modal">
            <div class="group-modal-backdrop"></div>
            <div class="group-modal-card">
                <button type="button" id="groupBackBtn" class="group-back-btn">←</button>

                <div class="group-avatar-row">
                    <div class="group-avatar-wrapper">
                        <img id="groupAvatar" src="/group-avatar.png" alt="Аватар группы" class="group-avatar">
                    </div>
                    <button type="button" class="edit-icon" id="editGroupAvatarBtn"></button>
                </div>

                <div class="group-name-row">
                    <div class="group-name" id="groupNameTitle"></div>
                    <button type="button" class="edit-icon" id="editGroupNameBtn"></button>
                </div>

                <!-- выбор новой аватарки -->
                <input type="file" id="groupAvatarInput" accept="image/*" style="display:none">

                <!-- редактирование названия -->
                <input type="text" id="groupNameEditInput" class="group-name-input" style="display:none">
                <button type="button" id="groupNameSaveBtn" class="group-name-save-btn" style="display:none">
                    Сохранить
                </button>

                <div class="chat-user-pill" id="groupMembersCount"></div>

                <div class="chat-attachments" id="groupAttachments">
                    <div class="chat-attachments-tabs">
                        <button type="button" class="chat-attachments-tab chat-attachments-tab-active" id="groupMembersTab">
                            Участники
                        </button>
                        <button type="button" class="chat-attachments-tab" id="groupMediaTab">
                            Медиа
                        </button>
                        <button type="button" class="chat-attachments-tab" id="groupFilesTab">
                            Файлы
                        </button>
                        <button type="button" class="chat-attachments-tab" id="groupAudioTab">
                            Аудио
                        </button>
                    </div>
                    <div class="chat-attachments-content">
                        <!-- Вкладка "Участники" -->
                        <div class="chat-attachments-members-list" id="groupMembersPane">
                            <button type="button" class="group-add-member-btn" id="groupAddMemberBtn">
                                Добавить участника
                            </button>
                            <div class="group-members-list" id="groupMembersList"></div>
                        </div>

                        <!-- Медиа / файлы / аудио -->
                        <div class="chat-attachments-media-grid" id="groupMediaGrid"></div>
                        <div class="chat-attachments-files-list" id="groupFilesList"></div>
                        <div class="chat-attachments-audio-list" id="groupAudioList"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL: ADD MEMBER BY ID -->
        <div id="groupAddModal" class="chat-user-modal">
            <div class="group-add-modal-backdrop"></div>
            <div class="group-add-modal-card">
                <div class="group-avatar-row">
                    <div class="group-avatar-wrapper">
                        <img id="groupAddAvatar" src="/group-avatar.png" alt="Аватар группы" class="group-avatar">
                    </div>
                </div>

                <div class="group-name" id="groupAddName"></div>

                <div class="chat-user-pill" id="groupAddMembersCount"></div>

                <div class="group-add-label">Введите ID пользователя</div>

                <div class="group-add-input-wrapper">
                    <input type="text" id="groupAddUserIdInput" maxlength="10" placeholder="ID">
                </div>

                <button type="button" class="group-add-submit-btn" id="groupAddSubmitBtn">
                    Добавить
                </button>
            </div>
        </div>

        <!-- MEDIA VIEWER -->
        <div id="mediaViewer" class="media-viewer">
            <div class="media-viewer-backdrop"></div>
            <div class="media-viewer-content">
                <img  id="mediaViewerImg"   class="media-viewer-img"   src="" alt="">
                <video id="mediaViewerVideo" class="media-viewer-video" controls></video>
            </div>
        </div>
    </main>

    <!-- PROFILE -->
    <main id="profileScreen" class="profile-screen">
        <div class="profile-content">
            <div class="profile-avatar-wrapper">
                <img id="profileAvatar" src="/img/default-avatar.png" alt="Аватар" class="profile-avatar">
            </div>

            <button type="button" class="profile-change-photo" id="changePhotoBtn">
                Изменить фотографию
            </button>
            <input type="file" id="profilePhotoInput" accept="image/*" style="display:none">

            <div class="profile-name" id="profileName"></div>

            <div class="profile-pill" id="profileId"></div>
            <div class="profile-pill" id="profileTeam"></div>
            <div class="profile-pill" id="profileDob"></div>
            <button type="button" class="profile-logout-btn" id="logoutBtn">
                Выйти из аккаунта
            </button>
        </div>
    </main>

    <!-- CREATE GROUP -->
    <main id="createGroupScreen" class="create-group-screen">
        <header class="create-group-header">
            <h1 class="register-title">Создание новой группы</h1>
        </header>

        <form class="create-group-form" autocomplete="off">
            <div class="field">
                <input id="groupNameInput" type="text" maxlength="40" placeholder="Название группы">
            </div>

            <div class="create-group-role-label">
                Группа для родителей или для танцоров?
            </div>
            <div class="create-group-role">
                <label class="radio-option">
                    <input type="radio" name="groupAudience" value="parents" id="audienceParents">
                    <span class="radio-circle"></span>
                    <span>Для родителей</span>
                </label>
                <label class="radio-option">
                    <input type="radio" name="groupAudience" value="dancers" id="audienceDancers">
                    <span class="radio-circle"></span>
                    <span>Для танцоров</span>
                </label>
            </div>

            <div class="field field-select create-group-age-field" id="ageField">
                <div class="select-display">
                    <span id="ageText">Выберите возраст участников</span>
                    <span class="select-arrow"></span>
                </div>
                <div class="select-options">
                    <div class="select-option" data-value="5+">5+</div>
                    <div class="select-option" data-value="7+">7+</div>
                    <div class="select-option" data-value="9+">9+</div>
                    <div class="select-option" data-value="10+">10+</div>
                    <div class="select-option" data-value="12+">12+</div>
                    <div class="select-option" data-value="14+">14+</div>
                    <div class="select-option" data-value="18+">18+</div>
                </div>
                <input type="hidden" id="ageValue">
            </div>

            <button type="button" class="btn btn-primary" id="createGroupBtn">Создать</button>
        </form>
    </main>

    <!-- BOTTOM NAV -->
    <nav id="bottomNav" class="bottom-nav">
        <button class="nav-btn nav-add" id="navAddBtn">
            <img id="navAddIcon" src="icons/plus.png" alt="Создать группу">
        </button>
        <button class="nav-btn nav-list" id="navListBtn">
            <img id="navListIcon" src="icons/list-gray.png" alt="Список">
        </button>
        <button class="nav-btn nav-home" id="navHomeBtn">
            <img id="navHomeIcon" src="icons/home.png" alt="Главная">
        </button>
        <button class="nav-btn nav-profile" id="navProfileBtn">
            <img id="navProfileIcon" src="icons/user.png" alt="Профиль">
        </button>
    </nav>

    <div id="networkBanner" class="network-banner"></div>

    <script src="app.js"></script>
</body>
</html>